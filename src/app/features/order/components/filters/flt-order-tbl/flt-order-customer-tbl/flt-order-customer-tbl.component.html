<div>
    <p-iconfield>
        <p-inputicon class="pi pi-user text-xs!" />
        <input 
        #trigger
        fluid="true" 
        size="small" 
        pSize="small"  
        placeholder="Todo"  
        type="text" 
        pInputText 
        readonly
        class="text-xs! truncate ps-[32px]! py-1! h-[30px]! items-center!"
        [formControl]="ctrlText"
        (click)="toggle($event)"/>
        @if(ctrlText.value !== null){<p-inputicon title="Limpiar" class="pi pi-times text-xs!" (click)="evtClear()" />}
    </p-iconfield>
    <p-popover #popover class="w-full! custom-popover" styleClass="custom-popover" appendTo="body">
        <div class="flex flex-col gap-2 w-full text-xs!">
            <div>
                <span class="block mb-2">{{ title }}</span>
                <p-select 
                autofocus="true"
                [formControl]="ctrlMode" 
                size="small" 
                [options]="filterModes" 
                optionLabel="label" 
                optionValue="value" 
                placeholder="Todo" 
                class="text-xs h-[30px]! min-w-[220px]"
                panelStyleClass="text-xs!">
                    <ng-template #selectedItem let-selectedOption>
                        <div class="w-full flex flex-row items-center gap-1">
                            <span class="kt-kbd kt-kbd-xs kt-kbd-outline font-light! w-[29px]! rounded-sm!">
                                {{ selectedOption.symbol }}
                            </span>
                            <span>{{ selectedOption.label }}</span>
                        </div>
                    </ng-template>

                    <ng-template let-mode #item>
                        <div class="w-full flex flex-row items-center justify-between gap-2">
                            <span>{{ mode.label }}</span>
                            <span class="kt-kbd kt-kbd-xs kt-kbd-outline font-light! w-[29px]! rounded-sm!">
                                {{ mode.symbol }}
                            </span>
                        </div>
                    </ng-template>
                </p-select>
            </div>
            <div class="flex flex-col gap-1">
                <p-iconfield>
                    <p-inputicon class="pi pi-search text-xs!" />
                    <input 
                    [formControl]="ctrlTextValue"
                    fluid
                    type="text" 
                    pInputText 
                    placeholder="Ingresar texto"
                    pSize="small"
                    [invalid]="submitted && ctrlTextValue.hasError('required')"
                    class="text-xs! ps-[30px]!" />
                </p-iconfield>
                @if (submitted && ctrlTextValue.hasError('required')) {
                    <p-message severity="error" size="small" variant="simple" class="text-xs">Debe ingresar un texto</p-message>
                }
            </div>
            
            <div class="flex flex-row justify-between gap-1 mt-3">
                <p-button 
                size="small"
                outlined="true"
                icon="pi pi-filter text-xs!" 
                label="Aplicar" 
                styleClass="h-[25px]! w-full!"
                pTooltip="Aplicar filtros" 
                tooltipPosition="top"
                tooltipStyleClass="text-xs!"
                placeholder="Top"
                (click)="evtApply()"
                ></p-button>

                @if(ctrlText.value !== null){
                    <p-button 
                    size="small"
                    outlined="true"
                    severity="danger"
                    icon="pi pi-filter-slash" 
                    label="Limpiar" 
                    styleClass="h-[25px]!"
                    pTooltip="Quitar filtros" 
                    tooltipPosition="top"
                    tooltipStyleClass="text-xs!"
                    placeholder="Top"
                    (click)="evtClear()"
                    ></p-button>
                }
            </div> 
        </div>
    </p-popover>
</div>